@mixin pb-utility($size) {
  position: relative;
  > svg {
    @if ($size==default) {
      height: $loader-width-medium;
      width: $loader-width-medium;
    } @else if ($size==small) {
      height: $loader-width-small;
      width: $loader-width-small;
    } @else if ($size==large) {
      height: $loader-width-large;
      width: $loader-width-large;
    }

    > circle {
      @if ($size== 'default') {
        stroke-width: 4;
      } @else if ($size== 'small') {
        stroke-width: 6;
      } @else if ($size== 'large') {
        stroke-width: 3;
      }
      stroke: var(--primary_bg);
      stroke-linecap: round;
    }

    > .dot {
      stroke-dasharray: 0, 200;
    }
  }

  > div {
    position: absolute;
    left: 0;
    top: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    @if ($size== default) {
      width: $loader-width-medium + 0.125rem;
      height: $loader-width-medium + 0.125rem;
    } @else if ($size== small) {
      width: $loader-width-small + 0.125rem;
      height: $loader-width-small + 0.125rem;
    } @else if ($size== large) {
      width: $loader-width-large + 0.125rem;
      height: $loader-width-large + 0.125rem;
    }
  }
}

@mixin pb_circle($size) {
  &-svg-indeterm {
    > .#{$prefix}-pb-bgcircle {
      stroke: var(--default_bg_high);
    }

    > .#{$prefix}-pb-maincircle {
      @if ($size == 'large') {
        animation: stroke-dash 2.5s ease-in-out infinite;
      } @else {
        animation: stroke-dash 2s ease-in-out infinite;
      }
    }

    > .#{$prefix}-pb-dot1 {
      @if ($size == 'large') {
        animation: stroke-dot1 2.5s ease-in infinite;
      } @else {
        animation: stroke-dot1 2s ease-in infinite;
      }
    }
    > .#{$prefix}-pb-dot2 {
      @if ($size == 'large') {
        animation: stroke-dot2 2.5s ease-in infinite;
      } @else {
        animation: stroke-dot2 2s ease-in infinite;
      }
    }
    > .#{$prefix}-pb-dot3 {
      @if ($size == 'large') {
        animation: stroke-dot3 2.5s ease-in infinite;
      } @else {
        animation: stroke-dot3 2s ease-in infinite;
      }
    }

    fill: none;
    animation: spin 4.3s linear both infinite;
  }

  &-svg-determ {
    > .#{$prefix}-pb-bgcircle {
      fill: none;
      stroke: var(--default_bg_high);
    }

    > .pb-circle-outer {
      transition: stroke-dashoffset 850ms ease-in-out 0s;
    }
    fill: none;
  }

  &-text {
    font-size: 0.75rem;
    text-anchor: middle;
    color: var(--default_text);
  }
}

@mixin pb_linear() {
  height: 4px;
  width: 100%;
  fill: none;
  &-line {
    stroke: var(--primary_bg);
    stroke-width: 0.25rem;
  }

  &-bgline {
    stroke: var(--default_bg_high);
  }

  &-mainline {
    transition: pb-linear 1s ease-in-out 0s;
  }

  &-mainline-one {
    animation: stroke-dash-linear 4s ease-in-out infinite;
  }
}

.#{$prefix}-pb-label-leftRight {
  display: flex;
  .#{$prefix}-pb-label-content {
    display: flex;
    .#{$prefix}-pb-label-text {
      align-self: center;
    }
  }
}

.#{$prefix}-pb-circle {
  @include pb-utility(default);
  @include pb_circle(default);
}

.#{$prefix}-pb-circle-small {
  @include pb-utility(small);
  @include pb_circle(small);
}

.#{$prefix}-pb-circle-large {
  @include pb-utility(large);
  @include pb_circle(large);
}

.#{$prefix}-pb-linear-wrapper {
  position: relative;
  .#{$prefix}-pb-linear {
    @include pb_linear();

    &-label,
    &-subtext {
      font-size: 0.75rem;
      font-weight: 400;
      color: var(--default_text);
      &-value {
        float: right;
      }
    }

    &-mainline-two {
      animation: stroke-dash-one-linear 4s ease-in-out infinite;
    }

    &-dot {
      stroke-dasharray: 1, 200;
    }

    &-dot-one {
      animation: stroke-dot-one-linear 4s ease-in infinite;
    }

    &-dot-two {
      animation: stroke-dot-two-linear 4s ease-in infinite;
    }

    &-dot-three {
      animation: stroke-dot-three-linear 4s ease-in infinite;
    }
  }
}

.#{$prefix}-pb-circle-wrapper {
  .#{$prefix}-pb-label-content {
    .#{$prefix}-pb-label-text {
      font-size: 0.75rem;
      font-weight: 400;
      color: var(--default_text);
    }
  }
}

@keyframes stroke-dash {
  0% {
    stroke-dasharray: 0, 200;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 60, 200;
  }

  100% {
    stroke-dasharray: 0, 200;
    stroke-dashoffset: -125px;
  }
}

@keyframes stroke-dot1 {
  0% {
    stroke-dasharray: 0, 200;
    stroke-dashoffset: 0;
  }

  25% {
    stroke-dasharray: 0, 200;
    stroke-dashoffset: 0;
  }

  100% {
    stroke-dasharray: 2, 200;
    stroke-dashoffset: -125px;
  }
}

@keyframes stroke-dot2 {
  0% {
    stroke-dashoffset: 0;
  }
  25% {
    stroke-dasharray: 0, 200;
    stroke-dashoffset: -12px;
  }

  100% {
    stroke-dasharray: 2, 200;
    stroke-dashoffset: -150px;
  }
}

@keyframes stroke-dot3 {
  0% {
    stroke-dasharray: 0, 200;
    stroke-dashoffset: 0;
  }
  25% {
    stroke-dasharray: 0, 200;
    stroke-dashoffset: -24px;
  }

  100% {
    stroke-dasharray: 2, 200;
    stroke-dashoffset: -175px;
  }
}

@keyframes spin {
  from {
    transform: rotate(0);
  }
  to {
    transform: rotate(1turn);
  }
}

@keyframes stroke-dash-linear {
  0% {
    stroke-dasharray: 0, 200;
    stroke-dashoffset: 0;
  }

  20% {
    stroke-dasharray: 0, 200;
    stroke-dashoffset: 0;
  }

  60% {
    stroke-dasharray: 60, 200;
  }

  100% {
    stroke-dasharray: 0, 200;
    stroke-dashoffset: -125px;
  }
}

@keyframes stroke-dash-one-linear {
  0% {
    stroke-dasharray: 20, 200;
    stroke-dashoffset: 0;
  }

  20% {
    stroke-dasharray: 70, 200;
  }

  40% {
    stroke-dasharray: 0, 200;
    stroke-dashoffset: -125px;
  }

  80% {
    stroke-dasharray: 0, 200;
    stroke-dashoffset: -125px;
  }

  80% {
    stroke-dasharray: 0, 200;
    stroke-dashoffset: 0;
  }

  100% {
    stroke-dasharray: 20, 200;
    stroke-dashoffset: 0;
  }
}

@keyframes stroke-dot-one-linear {
  0% {
    stroke-dashoffset: 4px;
  }

  60% {
    stroke-dashoffset: 4px;
  }

  60% {
    stroke-dashoffset: 0;
  }

  100% {
    stroke-dashoffset: -125px;
  }
}

@keyframes stroke-dot-two-linear {
  0% {
    stroke-dashoffset: 4px;
  }

  62% {
    stroke-dashoffset: 4px;
  }

  62% {
    stroke-dashoffset: -12px;
  }

  100% {
    stroke-dashoffset: -150px;
  }
}

@keyframes stroke-dot-three-linear {
  0% {
    stroke-dashoffset: 4px;
  }

  64% {
    stroke-dashoffset: 4px;
  }

  64% {
    stroke-dashoffset: -24px;
  }

  100% {
    stroke-dashoffset: -175px;
  }
}
