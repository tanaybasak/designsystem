@import '../../base';

$caret-icon: #555;
$node-hover-bg: rgba(70, 150, 210, 0.1);
$node-selection-bg: #0066b0;
$drag: #092b51;

.#{$prefix}-tree {
  font-size: 0.875rem;
  @include getFontWeight(regular);
  line-height: 1.5rem;
  letter-spacing: 0.16px;

  .tree-item {
    width: 100%;
    display: block;
    position: relative;
    padding: 0.3125rem 0 0;

    &:focus {
      @include themify($themes) {
        border: themed('interactive_border');
      }
    }

    .tree-node {
      cursor: pointer;
      line-height: unset;
      display: flex;
      flex-direction: row;
      align-items: center;
      border: 0.125rem solid transparent;

      &:hover {
        @include themify($themes) {
          background-color: themed('interactive_bg_hover');
        }
      }

      & > i {
        margin-right: 0.5rem;

        + div.treenode-action-wrapper {
          width: calc(100% - 1.375rem);
        }
      }

      i {
        width: 0.875rem;
        height: 0.875rem;
      }

      .caret {
        display: inline-block;

        &::before {
          content: ' ';
          position: absolute;
          height: 0.5rem;
          width: 0.5rem;
          margin-top: 0.125rem;
          // border-right: 0.0625rem solid $caret-icon;
          // border-bottom: 0.0625rem solid $caret-icon;
          @include themify($themes) {
            border-right: 0.0625rem solid themed('default_icon');
            border-bottom: 0.0625rem solid themed('default_icon');
          }
          transform: scale(1) rotate(-45deg);
          transition: all 0.2s ease-in-out;
          margin-left: 0.3125rem;
        }
      }

      .caret-down::before {
        transform: scale(1) rotate(45deg);
        margin-top: 0;
      }

      &.no-children-exist {
        padding-left: 1.375rem;
      }

      .treenode-action-wrapper {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        width: 100%;

        .treenode-overflow {
          .#{$prefix}-overflow-container > span {
            padding: 0 0.625rem;
          }

          &:hover {
            background-color: $node-hover-bg;
          }
        }

        .treenode-content-wrapper {
          display: flex;
          flex-direction: row;
          align-items: center;
          width: 100%;

          &.with-overflow {
            width: calc(100% - 1.75rem);
          }

          & > i {
            margin-right: 0.25rem;

            + span.tree-text-node {
              max-width: calc(100% - 1.125rem);
            }
          }

          .tree-text-node {
            display: inline-flex;
            max-width: 100%;
           
            @include themify($themes) {
              color: themed('default_text');
            }

            &:hover{
              @include themify($themes) {
                color: themed('default_text_high');
              }
            }

            &.highlight {
              // background-color: $node-selection-bg;
              // color: $white;
            }

            &.highlight-row {
              background: $drag;
              color: $white;
             
            }

            &.#{$prefix}-cut-node {
              opacity: 0.5;
            }

            div {
              overflow: hidden;
              text-overflow: ellipsis;
              padding: 0 0.25rem;
              vertical-align: middle;
              max-width: 100%;
              white-space: nowrap;
              height: 1.5rem;
            }
          }

          .#{$prefix}-text-container {
            display: inline-flex;
            width: 100%;
            position: relative;
            margin-bottom: 0;
            .#{$prefix}-form-control {
              height: 1.5rem;
            }

            button{
                position: absolute;
                background: transparent;
                right: 0;
                padding: 0 0.5rem;
                cursor: pointer;
            }
          }

        }
      }

      &.add-border {
        border-top: 0.125rem solid $drag;
      }

      &.add-border-bottom {
        border-bottom: 0.125rem solid $drag;
      }
    }

    &:not([aria-expanded]) > div .expanded,
    > ul,
    &[aria-expanded='false'] > ul {
      display: none;
    }

    &[aria-expanded='true'] > ul {
      display: block;
    }

    &[aria-expanded='false'] > div .expanded,
    &[aria-expanded='true'] > div .collapsed {
      display: none;
    }

    .tree-nested {
      margin-bottom: 0.25rem;
      margin-left: 1.25rem;
      font-size: 0.875rem;
    }
  }
}
